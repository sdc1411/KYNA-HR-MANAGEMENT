<script>
  
  const SentLeaves = {
    data: ()=>({
      page: 1,
      pageSize: 100,
      headers: [
        {text: "ID", value: "id"},
        {text: "Leave Type", value: "leaveTypes"},
        {text: "Lý do", value: "requestReason"},
        {text: "Chi tiết ngày nghỉ", value: "dataLeaveDays"},
        {text: "Chi tiết phê duyệt", value: "dataApprovals"},
        {text: "Status", value: "status"},
        {text: "Created At", value: "createdAt"},
      ],
    }),
    computed:{
      ...Vuex.mapState({
        loading: 'loading',
        loginUser: 'loginUser',
        statusColor: 'statusColor',
        leaveRequests: 'leaveRequests',
      }),
      ...Vuex.mapGetters({
        items: 'sentLeaves',
      }),
    },
    methods: {
      formatDate(date) {
        if (!date) return ''; // Return an empty string if date is undefined

        const formattedDate = new Date(date);
        const day = formattedDate.getDate().toString().padStart(2, '0');
        const month = (formattedDate.getMonth() + 1).toString().padStart(2, '0'); // Note: Month is zero-based
        const year = formattedDate.getFullYear();

        return `${day}/${month}/${year}`;
      },
      async onPageLoad(){
        this.$store.dispatch("getItems", {
          database: "leaveDaysDatabase",
          sheetName: "leaveRequests", 
          page: this.page, 
          pageSize: this.pageSize, 
          filters: {
            requestedBy: this.loginUser.employee_email,
          },
        })
        
      },
    },
    created(){
      this.onPageLoad()
    },
    template: `
    <?!= include_('dashboard/Pages/Leaves/SentLeaves_template.html'); ?>
    `
  }



  </script>